<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Meu Perfil - Sistema RH Para Todos</title>
  <link rel="stylesheet" href="public/styles/global.css">
  <link rel="stylesheet" href="public/styles/dashboard.css">
  <link rel="stylesheet" href="public/styles/components.css">
  <style>
    .profile-header {
      background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-gray) 100%);
      padding: 2rem;
      border-radius: var(--radius-lg);
      margin-bottom: var(--spacing-6);
      color: white;
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .profile-avatar-section {
      position: relative;
    }

    .profile-avatar-large {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: white;
      color: var(--primary-dark);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      font-weight: 700;
      border: 4px solid rgba(255, 255, 255, 0.3);
      position: relative;
      overflow: hidden;
    }

    .profile-avatar-large img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .avatar-upload-btn {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--success-green);
      color: white;
      border: 3px solid white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      transition: all 0.2s;
    }

    .avatar-upload-btn:hover {
      background: #229954;
      transform: scale(1.1);
    }

    .profile-header-info h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .profile-header-info .profile-role {
      font-size: 1.1rem;
      opacity: 0.9;
      margin-bottom: 0.5rem;
    }

    .profile-header-info .profile-email {
      font-size: 0.95rem;
      opacity: 0.8;
    }

    .profile-tabs {
      display: flex;
      gap: 0;
      border-bottom: 2px solid var(--gray-200);
      margin-bottom: var(--spacing-6);
      overflow-x: auto;
    }

    .profile-tab {
      padding: var(--spacing-4) var(--spacing-6);
      background: none;
      border: none;
      font-size: var(--font-size-base);
      font-weight: 500;
      color: var(--gray-500);
      cursor: pointer;
      position: relative;
      white-space: nowrap;
      transition: color 0.2s;
      border-bottom: 2px solid transparent;
      margin-bottom: -2px;
    }

    .profile-tab:hover {
      color: var(--gray-700);
    }

    .profile-tab.active {
      color: var(--primary-dark);
      border-bottom-color: var(--primary-dark);
    }

    .profile-tab-content {
      display: none;
    }

    .profile-tab-content.active {
      display: block;
    }

    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: var(--spacing-6);
    }

    .info-section {
      background: white;
      padding: var(--spacing-6);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
    }

    .info-section h3 {
      font-size: var(--font-size-lg);
      color: var(--gray-800);
      margin-bottom: var(--spacing-4);
      padding-bottom: var(--spacing-3);
      border-bottom: 2px solid var(--gray-200);
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      padding: var(--spacing-3) 0;
      border-bottom: 1px solid var(--gray-100);
    }

    .info-row:last-child {
      border-bottom: none;
    }

    .info-label {
      font-weight: 500;
      color: var(--gray-600);
      font-size: var(--font-size-sm);
    }

    .info-value {
      color: var(--gray-800);
      font-weight: 500;
      text-align: right;
    }

    .edit-form {
      background: white;
      padding: var(--spacing-6);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
    }

    .form-section-title {
      font-size: var(--font-size-lg);
      font-weight: 600;
      color: var(--gray-800);
      margin-bottom: var(--spacing-4);
      padding-bottom: var(--spacing-3);
      border-bottom: 2px solid var(--gray-200);
    }

    .form-actions {
      display: flex;
      gap: var(--spacing-3);
      margin-top: var(--spacing-6);
      padding-top: var(--spacing-4);
      border-top: 1px solid var(--gray-200);
    }

    .security-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--spacing-4);
      background: var(--gray-50);
      border-radius: var(--radius-md);
      margin-bottom: var(--spacing-3);
    }

    .security-item-info h4 {
      font-size: var(--font-size-base);
      color: var(--gray-800);
      margin-bottom: 0.25rem;
    }

    .security-item-info p {
      font-size: var(--font-size-sm);
      color: var(--gray-600);
    }

    .activity-item {
      display: flex;
      gap: var(--spacing-3);
      padding: var(--spacing-4);
      border-bottom: 1px solid var(--gray-100);
    }

    .activity-item:last-child {
      border-bottom: none;
    }

    .activity-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--gray-100);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .activity-content {
      flex: 1;
    }

    .activity-content strong {
      display: block;
      color: var(--gray-800);
      margin-bottom: 0.25rem;
    }

    .activity-content small {
      color: var(--gray-500);
      font-size: var(--font-size-sm);
    }

    .activity-time {
      color: var(--gray-400);
      font-size: var(--font-size-sm);
      white-space: nowrap;
    }

    @media (max-width: 768px) {
      .profile-header {
        flex-direction: column;
        text-align: center;
      }

      .info-grid {
        grid-template-columns: 1fr;
      }

      .profile-tabs {
        border-bottom: none;
      }

      .profile-tab {
        flex: 1;
        text-align: center;
        padding: var(--spacing-3);
        font-size: var(--font-size-sm);
      }
    }
  </style>
</head>

<body>
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <img src="public/assets/gruporhpaint.png" alt="logo_menu_lateral" height="60">
      </div>
    </div>

    <nav class="sidebar-nav">
      <div class="nav-section">GEST√ÉO DE PESSOAS</div>
      <a href="dashboard.html" class="nav-item">
        <span class="nav-icon">üìä</span>
        <span class="nav-text">Dashboard</span>
      </a>
      <a href="funcionarios.html" class="nav-item">
        <span class="nav-icon">üë•</span>
        <span class="nav-text">Funcion√°rios</span>
      </a>
      <a href="departamentos.html" class="nav-item">
        <span class="nav-icon">üè¢</span>
        <span class="nav-text">Departamentos</span>
      </a>
      <a href="cargos.html" class="nav-item">
        <span class="nav-icon">üíº</span>
        <span class="nav-text">Cargos</span>
      </a>

      <div class="nav-section">RECURSOS HUMANOS</div>
      <a href="recrutamento.html" class="nav-item">
        <span class="nav-icon">üìù</span>
        <span class="nav-text">Recrutamento</span>
      </a>
      <a href="treinamentos.html" class="nav-item">
        <span class="nav-icon">üéì</span>
        <span class="nav-text">Treinamentos</span>
      </a>
      <a href="avaliacoes.html" class="nav-item">
        <span class="nav-icon">‚≠ê</span>
        <span class="nav-text">Avalia√ß√µes</span>
      </a>

      <div class="nav-section">DEPARTAMENTO PESSOAL</div>
      <a href="folha-pagamento.html" class="nav-item">
        <span class="nav-icon">üí∞</span>
        <span class="nav-text">Folha de Pagamento</span>
      </a>
      <a href="beneficios.html" class="nav-item">
        <span class="nav-icon">üéÅ</span>
        <span class="nav-text">Benef√≠cios</span>
      </a>
      <a href="ferias.html" class="nav-item">
        <span class="nav-icon">üèñÔ∏è</span>
        <span class="nav-text">F√©rias</span>
      </a>
      <a href="ponto.html" class="nav-item">
        <span class="nav-icon">‚è∞</span>
        <span class="nav-text">Ponto</span>
      </a>

      <div class="nav-section">ADMINISTRA√á√ÉO</div>
      <a href="configuracoes.html" class="nav-item">
        <span class="nav-icon">‚öôÔ∏è</span>
        <span class="nav-text">Configura√ß√µes</span>
      </a>
      <a href="meu-perfil.html" class="nav-item active">
        <span class="nav-icon">üë§</span>
        <span class="nav-text">Meu Perfil</span>
      </a>
    </nav>
  </aside>

  <div class="main-content">
    <header class="topbar">
      <div class="topbar-left">
        <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
        <h1>Meu Perfil</h1>
      </div>
      <div class="topbar-right">
        <div class="user-menu">
          <button class="user-button" id="userMenuButton">
            <span class="user-avatar" id="userAvatar">A</span>
            <span class="user-name" id="userName">Admin</span>
            <span class="user-arrow">‚ñº</span>
          </button>
          <div class="user-dropdown" id="userDropdown">
            <div class="user-info">
              <strong id="userFullName">Administrador do Sistema</strong>
              <small id="userProfile">Administrador</small>
            </div>
            <hr>
            <a href="meu-perfil.html" class="dropdown-item">Meu Perfil</a>
            <a href="settings.html" class="dropdown-item">Configura√ß√µes</a>
            <hr>
            <a href="#" class="dropdown-item" id="logoutButton">Sair</a>
          </div>
        </div>
      </div>
    </header>

    <div class="content-area">
      <div class="container">
        <!-- Profile Header -->
        <div class="profile-header">
          <div class="profile-avatar-section">
            <div class="profile-avatar-large" id="profileAvatarLarge">
              <span id="avatarInitials">A</span>
            </div>
            <button class="avatar-upload-btn" id="avatarUploadBtn" title="Alterar foto">üì∑</button>
            <input type="file" id="avatarInput" accept="image/*" style="display: none;">
          </div>
          <div class="profile-header-info">
            <h1 id="profileName">Admin do Sistema</h1>
            <div class="profile-role" id="profileRole">Administrador do Sistema</div>
            <div class="profile-email" id="profileEmail">admin@local</div>
          </div>
        </div>

        <!-- Tabs -->
        <div class="profile-tabs">
          <button class="profile-tab active" data-tab="overview">Vis√£o Geral</button>
          <button class="profile-tab" data-tab="edit">Editar Perfil</button>
          <button class="profile-tab" data-tab="security">Seguran√ßa</button>
          <button class="profile-tab" data-tab="activity">Atividade</button>
        </div>

        <!-- Tab: Vis√£o Geral -->
        <div class="profile-tab-content active" id="tab-overview">
          <div class="info-grid">
            <!-- Informa√ß√µes Pessoais -->
            <div class="info-section">
              <h3>Informa√ß√µes Pessoais</h3>
              <div class="info-row">
                <span class="info-label">Nome Completo</span>
                <span class="info-value" id="infoNome">Admin do Sistema</span>
              </div>
              <div class="info-row">
                <span class="info-label">Email</span>
                <span class="info-value" id="infoEmail">admin@local</span>
              </div>
              <div class="info-row">
                <span class="info-label">Telefone</span>
                <span class="info-value" id="infoTelefone">(11) 99999-9999</span>
              </div>
              <div class="info-row">
                <span class="info-label">Data de Nascimento</span>
                <span class="info-value" id="infoNascimento">15/03/1985</span>
              </div>
              <div class="info-row">
                <span class="info-label">CPF</span>
                <span class="info-value" id="infoCpf">123.456.789-00</span>
              </div>
            </div>

            <!-- Informa√ß√µes Profissionais -->
            <div class="info-section">
              <h3>Informa√ß√µes Profissionais</h3>
              <div class="info-row">
                <span class="info-label">Cargo</span>
                <span class="info-value" id="infoCargo">Administrador do Sistema</span>
              </div>
              <div class="info-row">
                <span class="info-label">Departamento</span>
                <span class="info-value" id="infoDepartamento">Tecnologia da Informa√ß√£o</span>
              </div>
              <div class="info-row">
                <span class="info-label">Data de Admiss√£o</span>
                <span class="info-value" id="infoAdmissao">01/01/2020</span>
              </div>
              <div class="info-row">
                <span class="info-label">Matr√≠cula</span>
                <span class="info-value" id="infoMatricula">ADM-001</span>
              </div>
              <div class="info-row">
                <span class="info-label">Status</span>
                <span class="info-value"><span class="badge badge-success">Ativo</span></span>
              </div>
            </div>

            <!-- Endere√ßo -->
            <div class="info-section">
              <h3>Endere√ßo</h3>
              <div class="info-row">
                <span class="info-label">CEP</span>
                <span class="info-value" id="infoCep">01310-100</span>
              </div>
              <div class="info-row">
                <span class="info-label">Logradouro</span>
                <span class="info-value" id="infoLogradouro">Avenida Paulista</span>
              </div>
              <div class="info-row">
                <span class="info-label">N√∫mero</span>
                <span class="info-value" id="infoNumero">1000</span>
              </div>
              <div class="info-row">
                <span class="info-label">Complemento</span>
                <span class="info-value" id="infoComplemento">Sala 101</span>
              </div>
              <div class="info-row">
                <span class="info-label">Cidade/UF</span>
                <span class="info-value" id="infoCidade">S√£o Paulo - SP</span>
              </div>
            </div>

            <!-- Informa√ß√µes de Emerg√™ncia -->
            <div class="info-section">
              <h3>Contato de Emerg√™ncia</h3>
              <div class="info-row">
                <span class="info-label">Nome</span>
                <span class="info-value" id="infoEmergenciaNome">Maria Silva</span>
              </div>
              <div class="info-row">
                <span class="info-label">Parentesco</span>
                <span class="info-value" id="infoEmergenciaParentesco">C√¥njuge</span>
              </div>
              <div class="info-row">
                <span class="info-label">Telefone</span>
                <span class="info-value" id="infoEmergenciaTelefone">(11) 98888-8888</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: Editar Perfil -->
        <div class="profile-tab-content" id="tab-edit">
          <form class="edit-form" id="editProfileForm">
            <div class="form-section-title">Dados Pessoais</div>
            <div class="form-row form-row-2">
              <div class="form-group">
                <label class="form-label" for="editNome">Nome Completo *</label>
                <input type="text" id="editNome" class="form-input" value="Admin do Sistema" required>
              </div>
              <div class="form-group">
                <label class="form-label" for="editEmail">Email *</label>
                <input type="email" id="editEmail" class="form-input" value="admin@local" required>
              </div>
            </div>

            <div class="form-row form-row-3">
              <div class="form-group">
                <label class="form-label" for="editTelefone">Telefone</label>
                <input type="tel" id="editTelefone" class="form-input" value="(11) 99999-9999">
              </div>
              <div class="form-group">
                <label class="form-label" for="editNascimento">Data de Nascimento</label>
                <input type="date" id="editNascimento" class="form-input" value="1985-03-15">
              </div>
              <div class="form-group">
                <label class="form-label" for="editCpf">CPF</label>
                <input type="text" id="editCpf" class="form-input" value="123.456.789-00" disabled>
              </div>
            </div>

            <div class="form-section-title" style="margin-top: 2rem;">Endere√ßo</div>
            <div class="form-row form-row-3">
              <div class="form-group">
                <label class="form-label" for="editCep">CEP</label>
                <input type="text" id="editCep" class="form-input" value="01310-100">
              </div>
              <div class="form-group">
                <label class="form-label" for="editLogradouro">Logradouro</label>
                <input type="text" id="editLogradouro" class="form-input" value="Avenida Paulista">
              </div>
              <div class="form-group">
                <label class="form-label" for="editNumero">N√∫mero</label>
                <input type="text" id="editNumero" class="form-input" value="1000">
              </div>
            </div>

            <div class="form-row form-row-3">
              <div class="form-group">
                <label class="form-label" for="editComplemento">Complemento</label>
                <input type="text" id="editComplemento" class="form-input" value="Sala 101">
              </div>
              <div class="form-group">
                <label class="form-label" for="editBairro">Bairro</label>
                <input type="text" id="editBairro" class="form-input" value="Bela Vista">
              </div>
              <div class="form-group">
                <label class="form-label" for="editCidade">Cidade</label>
                <input type="text" id="editCidade" class="form-input" value="S√£o Paulo">
              </div>
            </div>

            <div class="form-section-title" style="margin-top: 2rem;">Contato de Emerg√™ncia</div>
            <div class="form-row form-row-3">
              <div class="form-group">
                <label class="form-label" for="editEmergenciaNome">Nome</label>
                <input type="text" id="editEmergenciaNome" class="form-input" value="Maria Silva">
              </div>
              <div class="form-group">
                <label class="form-label" for="editEmergenciaParentesco">Parentesco</label>
                <input type="text" id="editEmergenciaParentesco" class="form-input" value="C√¥njuge">
              </div>
              <div class="form-group">
                <label class="form-label" for="editEmergenciaTelefone">Telefone</label>
                <input type="tel" id="editEmergenciaTelefone" class="form-input" value="(11) 98888-8888">
              </div>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary">Salvar Altera√ß√µes</button>
              <button type="button" class="btn btn-secondary" id="btnCancelEdit">Cancelar</button>
            </div>
          </form>
        </div>

        <!-- Tab: Seguran√ßa -->
        <div class="profile-tab-content" id="tab-security">
          <div class="edit-form">
            <div class="form-section-title">Alterar Senha</div>
            <form id="changePasswordForm">
              <div class="form-row form-row-2">
                <div class="form-group">
                  <label class="form-label" for="currentPassword">Senha Atual *</label>
                  <input type="password" id="currentPassword" class="form-input" required>
                </div>
              </div>
              <div class="form-row form-row-2">
                <div class="form-group">
                  <label class="form-label" for="newPassword">Nova Senha *</label>
                  <input type="password" id="newPassword" class="form-input" required>
                </div>
                <div class="form-group">
                  <label class="form-label" for="confirmPassword">Confirmar Nova Senha *</label>
                  <input type="password" id="confirmPassword" class="form-input" required>
                </div>
              </div>
              <div class="form-actions">
                <button type="submit" class="btn btn-primary">Alterar Senha</button>
              </div>
            </form>
          </div>

          <div style="height: 2rem;"></div>

          <div class="edit-form">
            <div class="form-section-title">Configura√ß√µes de Seguran√ßa</div>
            
            <div class="security-item">
              <div class="security-item-info">
                <h4>Autentica√ß√£o de Dois Fatores</h4>
                <p>Adicione uma camada extra de seguran√ßa √† sua conta</p>
              </div>
              <button class="btn btn-secondary" id="btn2FA">Ativar</button>
            </div>

            <div class="security-item">
              <div class="security-item-info">
                <h4>Sess√µes Ativas</h4>
                <p>Gerencie dispositivos conectados √† sua conta</p>
              </div>
              <button class="btn btn-secondary" id="btnSessions">Ver Sess√µes</button>
            </div>

            <div class="security-item">
              <div class="security-item-info">
                <h4>Hist√≥rico de Login</h4>
                <p>Visualize tentativas de acesso √† sua conta</p>
              </div>
              <button class="btn btn-secondary" id="btnLoginHistory">Ver Hist√≥rico</button>
            </div>
          </div>
        </div>

        <!-- Tab: Atividade -->
        <div class="profile-tab-content" id="tab-activity">
          <div class="edit-form">
            <div class="form-section-title">Atividades Recentes</div>
            
            <div class="activity-item">
              <div class="activity-icon">üîì</div>
              <div class="activity-content">
                <strong>Login realizado</strong>
                <small>Acesso via navegador Chrome - Windows</small>
              </div>
              <div class="activity-time">H√° 2 horas</div>
            </div>

            <div class="activity-item">
              <div class="activity-icon">‚úèÔ∏è</div>
              <div class="activity-content">
                <strong>Perfil atualizado</strong>
                <small>Informa√ß√µes pessoais foram modificadas</small>
              </div>
              <div class="activity-time">Ontem</div>
            </div>

            <div class="activity-item">
              <div class="activity-icon">üîë</div>
              <div class="activity-content">
                <strong>Senha alterada</strong>
                <small>Senha foi modificada com sucesso</small>
              </div>
              <div class="activity-time">3 dias atr√°s</div>
            </div>

            <div class="activity-item">
              <div class="activity-icon">üë•</div>
              <div class="activity-content">
                <strong>Novo funcion√°rio cadastrado</strong>
                <small>Jo√£o Silva adicionado ao departamento de TI</small>
              </div>
              <div class="activity-time">5 dias atr√°s</div>
            </div>

            <div class="activity-item">
              <div class="activity-icon">üìä</div>
              <div class="activity-content">
                <strong>Relat√≥rio gerado</strong>
                <small>Relat√≥rio de folha de pagamento - Janeiro 2026</small>
              </div>
              <div class="activity-time">1 semana atr√°s</div>
            </div>

            <div class="activity-item">
              <div class="activity-icon">üèñÔ∏è</div>
              <div class="activity-content">
                <strong>F√©rias aprovadas</strong>
                <small>Solicita√ß√£o de f√©rias para Maria Santos</small>
              </div>
              <div class="activity-time">2 semanas atr√°s</div>
            </div>
          </div>
        </div>

      </div> <!-- end container -->
    </div> <!-- end content-area -->
  </div> <!-- end main-content -->

  <!-- Alert Messages -->
  <div id="alertSuccess" class="alert alert-success" style="position: fixed; top: 80px; right: 20px; z-index: 1000; display: none;"></div>
  <div id="alertError" class="alert alert-error" style="position: fixed; top: 80px; right: 20px; z-index: 1000; display: none;"></div>

  <script src="public/scripts/auth.js"></script>
  <script>
    // Tab switching
    document.querySelectorAll('.profile-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        const tabName = tab.getAttribute('data-tab');
        
        // Update active tab
        document.querySelectorAll('.profile-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        // Update active content
        document.querySelectorAll('.profile-tab-content').forEach(content => {
          content.classList.remove('active');
        });
        document.getElementById(`tab-${tabName}`).classList.add('active');
      });
    });

    // Mobile menu
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const sidebar = document.getElementById('sidebar');
    if (mobileMenuBtn) {
      mobileMenuBtn.addEventListener('click', () => {
        sidebar.classList.toggle('mobile-open');
      });
    }

    // User menu dropdown
    const userMenuButton = document.getElementById('userMenuButton');
    const userDropdown = document.getElementById('userDropdown');
    if (userMenuButton) {
      userMenuButton.addEventListener('click', (e) => {
        e.stopPropagation();
        userDropdown.classList.toggle('active');
      });

      document.addEventListener('click', () => {
        userDropdown.classList.remove('active');
      });
    }

    // Avatar upload
    const avatarUploadBtn = document.getElementById('avatarUploadBtn');
    const avatarInput = document.getElementById('avatarInput');
    if (avatarUploadBtn) {
      avatarUploadBtn.addEventListener('click', () => {
        avatarInput.click();
      });

      avatarInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (event) => {
            const avatarLarge = document.getElementById('profileAvatarLarge');
            avatarLarge.innerHTML = `<img src="${event.target.result}" alt="Avatar">`;
            showAlert('success', 'Foto de perfil atualizada com sucesso!');
          };
          reader.readAsDataURL(file);
        }
      });
    }

    // Edit profile form
    const editProfileForm = document.getElementById('editProfileForm');
    if (editProfileForm) {
      editProfileForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        // Update info in overview tab
        document.getElementById('infoNome').textContent = document.getElementById('editNome').value;
        document.getElementById('infoEmail').textContent = document.getElementById('editEmail').value;
        document.getElementById('infoTelefone').textContent = document.getElementById('editTelefone').value;
        document.getElementById('infoNascimento').textContent = new Date(document.getElementById('editNascimento').value).toLocaleDateString('pt-BR');
        document.getElementById('infoCep').textContent = document.getElementById('editCep').value;
        document.getElementById('infoLogradouro').textContent = document.getElementById('editLogradouro').value;
        document.getElementById('infoNumero').textContent = document.getElementById('editNumero').value;
        document.getElementById('infoComplemento').textContent = document.getElementById('editComplemento').value;
        document.getElementById('infoCidade').textContent = document.getElementById('editCidade').value;
        document.getElementById('infoEmergenciaNome').textContent = document.getElementById('editEmergenciaNome').value;
        document.getElementById('infoEmergenciaParentesco').textContent = document.getElementById('editEmergenciaParentesco').value;
        document.getElementById('infoEmergenciaTelefone').textContent = document.getElementById('editEmergenciaTelefone').value;

        // Update header
        document.getElementById('profileName').textContent = document.getElementById('editNome').value;
        document.getElementById('profileEmail').textContent = document.getElementById('editEmail').value;

        showAlert('success', 'Perfil atualizado com sucesso!');
        
        // Switch to overview tab
        document.querySelector('[data-tab="overview"]').click();
      });
    }

    // Cancel edit
    const btnCancelEdit = document.getElementById('btnCancelEdit');
    if (btnCancelEdit) {
      btnCancelEdit.addEventListener('click', () => {
        document.querySelector('[data-tab="overview"]').click();
      });
    }

    // Change password form
    const changePasswordForm = document.getElementById('changePasswordForm');
    if (changePasswordForm) {
      changePasswordForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;

        if (newPassword !== confirmPassword) {
          showAlert('error', 'As senhas n√£o coincidem!');
          return;
        }

        if (newPassword.length < 6) {
          showAlert('error', 'A senha deve ter pelo menos 6 caracteres!');
          return;
        }

        showAlert('success', 'Senha alterada com sucesso!');
        changePasswordForm.reset();
      });
    }

    // Alert function
    function showAlert(type, message) {
      const alertEl = document.getElementById(type === 'error' ? 'alertError' : 'alertSuccess');
      const otherAlert = document.getElementById(type === 'error' ? 'alertSuccess' : 'alertError');
      
      otherAlert.style.display = 'none';
      alertEl.textContent = message;
      alertEl.style.display = 'block';
      
      setTimeout(() => {
        alertEl.style.display = 'none';
      }, 3000);
    }

    // Logout
    const logoutButton = document.getElementById('logoutButton');
    if (logoutButton) {
      logoutButton.addEventListener('click', (e) => {
        e.preventDefault();
        if (confirm('Deseja realmente sair?')) {
          window.location.href = 'index.html';
        }
      });
    }

    // Load user data if Auth is available
    document.addEventListener('DOMContentLoaded', () => {
      if (typeof Auth !== 'undefined' && Auth.isAuthenticated()) {
        const user = Auth.getCurrentUser();
        if (user) {
          // Update all user name references
          const elements = ['userName', 'userFullName', 'profileName', 'userNameInline', 'infoNome', 'editNome'];
          elements.forEach(id => {
            const el = document.getElementById(id);
            if (el) el.textContent = user.name || 'Usu√°rio';
          });

          // Update email references
          const emailElements = ['profileEmail', 'infoEmail', 'editEmail'];
          emailElements.forEach(id => {
            const el = document.getElementById(id);
            if (el) {
              if (el.tagName === 'INPUT') {
                el.value = user.email || 'usuario@email.com';
              } else {
                el.textContent = user.email || 'usuario@email.com';
              }
            }
          });

          // Update avatar
          const avatar = user.name ? user.name.charAt(0).toUpperCase() : 'U';
          const avatarElements = ['userAvatar', 'avatarInitials'];
          avatarElements.forEach(id => {
            const el = document.getElementById(id);
            if (el) el.textContent = avatar;
          });

          // Update profile
          const profileElements = ['userProfile', 'userProfileInline', 'profileRole', 'infoCargo'];
          profileElements.forEach(id => {
            const el = document.getElementById(id);
            if (el) el.textContent = user.profile || 'Usu√°rio';
          });
        }
      }
    });
  </script>
</body>

</html>