<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Funcion√°rios - Sistema RH</title>
  <link rel="stylesheet" href="public/styles/global.css">
  <link rel="stylesheet" href="public/styles/dashboard.css">
  <link rel="stylesheet" href="public/styles/components.css">
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="48" height="48" rx="8" fill="#FFFFFF"/>
          <path d="M24 12C17.373 12 12 17.373 12 24C12 30.627 17.373 36 24 36C30.627 36 36 30.627 36 24C36 17.373 30.627 12 24 12ZM24 20C25.657 20 27 21.343 27 23C27 24.657 25.657 26 24 26C22.343 26 21 24.657 21 23C21 21.343 22.343 20 24 20ZM24 33.2C20.8 33.2 17.988 31.53 16.4 29C16.44 26.4 21.6 25 24 25C26.392 25 31.56 26.4 31.6 29C30.012 31.53 27.2 33.2 24 33.2Z" fill="#2c3e50"/>
        </svg>
        <span>Sistema RH</span>
      </div>
      <button class="sidebar-toggle" id="sidebarToggle">‚ò∞</button>
    </div>

    <nav class="sidebar-nav">
      <a href="dashboard.html" class="nav-item">
        <span class="nav-text">Dashboard</span>
      </a>
      
      <div class="nav-section">Gest√£o de Pessoas</div>
      <a href="employees.html" class="nav-item active">
        <span class="nav-text">Funcion√°rios</span>
      </a>
      <a href="departments.html" class="nav-item">
        <span class="nav-text">Departamentos</span>
      </a>
      <a href="positions.html" class="nav-item">
        <span class="nav-text">Cargos</span>
      </a>
      
      <div class="nav-section">Recursos Humanos</div>
      <a href="recruitment.html" class="nav-item">
        <span class="nav-text">Recrutamento</span>
      </a>
      <a href="training.html" class="nav-item">
        <span class="nav-text">Treinamentos</span>
      </a>
      <a href="performance.html" class="nav-item">
        <span class="nav-text">Avalia√ß√µes</span>
      </a>
      
      <div class="nav-section">Departamento Pessoal</div>
      <a href="payroll.html" class="nav-item">
        <span class="nav-text">Folha de Pagamento</span>
      </a>
      <a href="benefits.html" class="nav-item">
        <span class="nav-text">Benef√≠cios</span>
      </a>
      <a href="vacation.html" class="nav-item">
        <span class="nav-text">F√©rias</span>
      </a>
      <a href="timesheet.html" class="nav-item">
        <span class="nav-text">Ponto</span>
      </a>
      
      <div class="nav-section">Administra√ß√£o</div>
      <a href="reports.html" class="nav-item">
        <span class="nav-text">Relat√≥rios</span>
      </a>
      <a href="settings.html" class="nav-item">
        <span class="nav-text">Configura√ß√µes</span>
      </a>
    </nav>
  </aside>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Topbar -->
    <header class="topbar">
      <div class="topbar-left">
        <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
        <h1>Funcion√°rios</h1>
      </div>
      <div class="topbar-right">
        <div class="user-menu">
          <button class="user-button" id="userMenuButton">
            <span class="user-avatar" id="userAvatar">U</span>
            <span class="user-name" id="userName">Usu√°rio</span>
            <span class="user-arrow">‚ñº</span>
          </button>
          <div class="user-dropdown" id="userDropdown">
            <div class="user-info">
              <strong id="userFullName">Nome do Usu√°rio</strong>
              <small id="userProfile">Perfil</small>
            </div>
            <hr>
            <a href="#" class="dropdown-item">Meu Perfil</a>
            <a href="settings.html" class="dropdown-item">Configura√ß√µes</a>
            <hr>
            <a href="#" class="dropdown-item" id="logoutButton">Sair</a>
          </div>
        </div>
      </div>
    </header>

    <!-- Content Area -->
    <div class="content-area">
      <!-- Stats -->
      <div class="stats-row">
        <div class="stat-box">
          <div class="stat-box-header">
            <div class="stat-box-icon" style="background: rgba(44, 62, 80, 0.1); color: var(--primary-dark);">üë•</div>
          </div>
          <div class="stat-box-value" id="statTotal">0</div>
          <div class="stat-box-label">Total de Funcion√°rios</div>
        </div>
        <div class="stat-box">
          <div class="stat-box-header">
            <div class="stat-box-icon" style="background: rgba(39, 174, 96, 0.1); color: var(--success-green);">‚úì</div>
          </div>
          <div class="stat-box-value" id="statAtivos">0</div>
          <div class="stat-box-label">Ativos</div>
        </div>
        <div class="stat-box">
          <div class="stat-box-header">
            <div class="stat-box-icon" style="background: rgba(243, 156, 18, 0.1); color: var(--warning-orange);">‚è≥</div>
          </div>
          <div class="stat-box-value" id="statFerias">0</div>
          <div class="stat-box-label">Em F√©rias</div>
        </div>
        <div class="stat-box">
          <div class="stat-box-header">
            <div class="stat-box-icon" style="background: rgba(231, 76, 60, 0.1); color: var(--error-red);">‚Üì</div>
          </div>
          <div class="stat-box-value" id="statDesligados">0</div>
          <div class="stat-box-label">Desligados (m√™s)</div>
        </div>
      </div>

      <!-- Page Header -->
      <div class="page-header">
        <div>
          <h2 class="page-title">Lista de Funcion√°rios</h2>
          <p class="page-subtitle">Gerencie todos os funcion√°rios da empresa</p>
        </div>
        <div class="page-actions">
          <button class="btn btn-secondary" onclick="exportEmployees()">
            üì• Exportar
          </button>
          <button class="btn btn-primary" onclick="openEmployeeModal()">
            + Novo Funcion√°rio
          </button>
        </div>
      </div>

      <!-- Filters -->
      <div class="filters-bar">
        <div class="search-box">
          <input type="text" id="searchInput" placeholder="Buscar por nome, matr√≠cula ou CPF..." onkeyup="filterEmployees()">
        </div>
        <div class="filter-group">
          <label>Departamento:</label>
          <select id="filterDepartment" onchange="filterEmployees()">
            <option value="">Todos</option>
            <option value="TI">Tecnologia</option>
            <option value="RH">Recursos Humanos</option>
            <option value="Financeiro">Financeiro</option>
            <option value="Comercial">Comercial</option>
            <option value="Opera√ß√µes">Opera√ß√µes</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Status:</label>
          <select id="filterStatus" onchange="filterEmployees()">
            <option value="">Todos</option>
            <option value="ATIVO">Ativo</option>
            <option value="FERIAS">Em F√©rias</option>
            <option value="AFASTADO">Afastado</option>
            <option value="DESLIGADO">Desligado</option>
          </select>
        </div>
      </div>

      <!-- Table -->
      <div class="table-container">
        <table class="data-table" id="employeesTable">
          <thead>
            <tr>
              <th class="sortable" onclick="sortTable(0)">Funcion√°rio</th>
              <th class="sortable" onclick="sortTable(1)">Matr√≠cula</th>
              <th class="sortable hide-mobile" onclick="sortTable(2)">Departamento</th>
              <th class="sortable hide-mobile" onclick="sortTable(3)">Cargo</th>
              <th class="sortable hide-mobile" onclick="sortTable(4)">Admiss√£o</th>
              <th>Status</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="employeesTableBody">
            <!-- Data will be loaded here -->
          </tbody>
        </table>

        <div class="table-footer">
          <div class="per-page">
            <span>Exibir</span>
            <select id="perPage" onchange="changePerPage()">
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
            <span>por p√°gina</span>
          </div>
          <div class="table-info" id="tableInfo">Mostrando 0 de 0 resultados</div>
          <div class="pagination" id="pagination">
            <!-- Pagination will be generated -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Novo/Editar Funcion√°rio -->
  <div class="modal" id="employeeModal">
    <div class="modal-dialog modal-lg">
      <div class="modal-header">
        <h3 class="modal-title" id="modalTitle">Novo Funcion√°rio</h3>
        <button class="modal-close" onclick="Modal.close('employeeModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="employeeForm">
          <input type="hidden" id="employeeId" name="id">
          
          <!-- Tabs -->
          <div class="tabs" data-tab-content="employeeTabs">
            <button type="button" class="tab-btn active" data-tab="dados">Dados Pessoais</button>
            <button type="button" class="tab-btn" data-tab="contato">Contato</button>
            <button type="button" class="tab-btn" data-tab="profissional">Dados Profissionais</button>
            <button type="button" class="tab-btn" data-tab="bancario">Dados Banc√°rios</button>
          </div>

          <div id="employeeTabs">
            <!-- Tab: Dados Pessoais -->
            <div class="tab-content active" data-tab-content="dados">
              <div class="form-section">
                <h4 class="form-section-title">Informa√ß√µes B√°sicas</h4>
                <div class="form-row form-row-2">
                  <div class="form-group">
                    <label class="form-label">Nome Completo *</label>
                    <input type="text" class="form-input" name="nome_completo" required>
                  </div>
                  <div class="form-group">
                    <label class="form-label">CPF *</label>
                    <input type="text" class="form-input" name="cpf" data-mask="cpf" required>
                  </div>
                </div>
                <div class="form-row form-row-3">
                  <div class="form-group">
                    <label class="form-label">RG</label>
                    <input type="text" class="form-input" name="rg">
                  </div>
                  <div class="form-group">
                    <label class="form-label">Data de Nascimento *</label>
                    <input type="date" class="form-input" name="data_nascimento" required>
                  </div>
                  <div class="form-group">
                    <label class="form-label">G√™nero</label>
                    <select class="form-select" name="genero">
                      <option value="">Selecione</option>
                      <option value="M">Masculino</option>
                      <option value="F">Feminino</option>
                      <option value="O">Outro</option>
                      <option value="N">Prefiro n√£o informar</option>
                    </select>
                  </div>
                </div>
                <div class="form-row form-row-2">
                  <div class="form-group">
                    <label class="form-label">Estado Civil</label>
                    <select class="form-select" name="estado_civil">
                      <option value="">Selecione</option>
                      <option value="SOLTEIRO">Solteiro(a)</option>
                      <option value="CASADO">Casado(a)</option>
                      <option value="DIVORCIADO">Divorciado(a)</option>
                      <option value="VIUVO">Vi√∫vo(a)</option>
                      <option value="UNIAO_ESTAVEL">Uni√£o Est√°vel</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label class="form-label">Nacionalidade</label>
                    <input type="text" class="form-input" name="nacionalidade" value="Brasileiro(a)">
                  </div>
                </div>
              </div>
            </div>

            <!-- Tab: Contato -->
            <div class="tab-content" data-tab-content="contato">
              <div class="form-section">
                <h4 class="form-section-title">Contato</h4>
                <div class="form-row form-row-2">
                  <div class="form-group">
                    <label class="form-label">Email Pessoal</label>
                    <input type="email" class="form-input" name="email_pessoal">
                  </div>
                  <div class="form-group">
                    <label class="form-label">Email Corporativo</label>
                    <input type="email" class="form-input" name="email_corporativo">
                  </div>
                </div>
                <div class="form-row form-row-2">
                  <div class="form-group">
                    <label class="form-label">Telefone</label>
                    <input type="text" class="form-input" name="telefone" data-mask="phone">
                  </div>
                  <div class="form-group">
                    <label class="form-label">Celular</label>
                    <input type="text" class="form-input" name="celular" data-mask="phone">
                  </div>
                </div>
              </div>

              <div class="form-section">
                <h4 class="form-section-title">Endere√ßo</h4>
                <div class="form-row form-row-3">
                  <div class="form-group">
                    <label class="form-label">CEP</label>
                    <input type="text" class="form-input" name="cep" data-mask="cep" onblur="searchCEP(this.value)">
                  </div>
                  <div class="form-group" style="grid-column: span 2;">
                    <label class="form-label">Logradouro</label>
                    <input type="text" class="form-input" name="logradouro" id="logradouro">
                  </div>
                </div>
                <div class="form-row form-row-3">
                  <div class="form-group">
                    <label class="form-label">N√∫mero</label>
                    <input type="text" class="form-input" name="numero">
                  </div>
                  <div class="form-group">
                    <label class="form-label">Complemento</label>
                    <input type="text" class="form-input" name="complemento">
                  </div>
                  <div class="form-group">
                    <label class="form-label">Bairro</label>
                    <input type="text" class="form-input" name="bairro" id="bairro">
                  </div>
                </div>
                <div class="form-row form-row-2">
                  <div class="form-group">
                    <label class="form-label">Cidade</label>
                    <input type="text" class="form-input" name="cidade" id="cidade">
                  </div>
                  <div class="form-group">
                    <label class="form-label">Estado</label>
                    <select class="form-select" name="estado" id="estado">
                      <option value="">Selecione</option>
                      <option value="AC">Acre</option>
                      <option value="AL">Alagoas</option>
                      <option value="AP">Amap√°</option>
                      <option value="AM">Amazonas</option>
                      <option value="BA">Bahia</option>
                      <option value="CE">Cear√°</option>
                      <option value="DF">Distrito Federal</option>
                      <option value="ES">Esp√≠rito Santo</option>
                      <option value="GO">Goi√°s</option>
                      <option value="MA">Maranh√£o</option>
                      <option value="MT">Mato Grosso</option>
                      <option value="MS">Mato Grosso do Sul</option>
                      <option value="MG">Minas Gerais</option>
                      <option value="PA">Par√°</option>
                      <option value="PB">Para√≠ba</option>
                      <option value="PR">Paran√°</option>
                      <option value="PE">Pernambuco</option>
                      <option value="PI">Piau√≠</option>
                      <option value="RJ">Rio de Janeiro</option>
                      <option value="RN">Rio Grande do Norte</option>
                      <option value="RS">Rio Grande do Sul</option>
                      <option value="RO">Rond√¥nia</option>
                      <option value="RR">Roraima</option>
                      <option value="SC">Santa Catarina</option>
                      <option value="SP">S√£o Paulo</option>
                      <option value="SE">Sergipe</option>
                      <option value="TO">Tocantins</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <!-- Tab: Dados Profissionais -->
            <div class="tab-content" data-tab-content="profissional">
              <div class="form-section">
                <h4 class="form-section-title">Informa√ß√µes Profissionais</h4>
                <div class="form-row form-row-2">
                  <div class="form-group">
                    <label class="form-label">Matr√≠cula *</label>
                    <input type="text" class="form-input" name="matricula" required>
                  </div>
                  <div class="form-group">
                    <label class="form-label">Data de Admiss√£o *</label>
                    <input type="date" class="form-input" name="data_admissao" required>
                  </div>
                </div>
                <div class="form-row form-row-2">
                  <div class="form-group">
                    <label class="form-label">Departamento *</label>
                    <select class="form-select" name="departamento_id" required>
                      <option value="">Selecione</option>
                      <option value="1">Tecnologia</option>
                      <option value="2">Recursos Humanos</option>
                      <option value="3">Financeiro</option>
                      <option value="4">Comercial</option>
                      <option value="5">Opera√ß√µes</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label class="form-label">Cargo *</label>
                    <select class="form-select" name="cargo_id" required>
                      <option value="">Selecione</option>
                      <option value="1">Analista</option>
                      <option value="2">Desenvolvedor</option>
                      <option value="3">Coordenador</option>
                      <option value="4">Gerente</option>
                      <option value="5">Diretor</option>
                    </select>
                  </div>
                </div>
                <div class="form-row form-row-3">
                  <div class="form-group">
                    <label class="form-label">Tipo de Contrato</label>
                    <select class="form-select" name="tipo_contrato">
                      <option value="CLT">CLT</option>
                      <option value="PJ">PJ</option>
                      <option value="ESTAGIO">Est√°gio</option>
                      <option value="TEMPORARIO">Tempor√°rio</option>
                      <option value="APRENDIZ">Jovem Aprendiz</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label class="form-label">Sal√°rio</label>
                    <input type="text" class="form-input" name="salario_atual" data-mask="currency">
                  </div>
                  <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" name="status">
                      <option value="ATIVO">Ativo</option>
                      <option value="FERIAS">Em F√©rias</option>
                      <option value="AFASTADO">Afastado</option>
                      <option value="DESLIGADO">Desligado</option>
                    </select>
                  </div>
                </div>
                <div class="form-row form-row-2">
                  <div class="form-group">
                    <label class="form-label">Gestor Direto</label>
                    <select class="form-select" name="gestor_id">
                      <option value="">Selecione</option>
                      <!-- Will be loaded dynamically -->
                    </select>
                  </div>
                  <div class="form-group">
                    <label class="form-label">Centro de Custo</label>
                    <input type="text" class="form-input" name="centro_custo">
                  </div>
                </div>
              </div>
            </div>

            <!-- Tab: Dados Banc√°rios -->
            <div class="tab-content" data-tab-content="bancario">
              <div class="form-section">
                <h4 class="form-section-title">Dados Banc√°rios</h4>
                <div class="form-row form-row-2">
                  <div class="form-group">
                    <label class="form-label">Banco</label>
                    <select class="form-select" name="banco">
                      <option value="">Selecione</option>
                      <option value="001">Banco do Brasil</option>
                      <option value="033">Santander</option>
                      <option value="104">Caixa Econ√¥mica</option>
                      <option value="237">Bradesco</option>
                      <option value="341">Ita√∫</option>
                      <option value="756">Sicoob</option>
                      <option value="260">Nubank</option>
                      <option value="077">Inter</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label class="form-label">Tipo de Conta</label>
                    <select class="form-select" name="tipo_conta">
                      <option value="">Selecione</option>
                      <option value="CORRENTE">Conta Corrente</option>
                      <option value="POUPANCA">Poupan√ßa</option>
                      <option value="SALARIO">Conta Sal√°rio</option>
                    </select>
                  </div>
                </div>
                <div class="form-row form-row-2">
                  <div class="form-group">
                    <label class="form-label">Ag√™ncia</label>
                    <input type="text" class="form-input" name="agencia">
                  </div>
                  <div class="form-group">
                    <label class="form-label">Conta</label>
                    <input type="text" class="form-input" name="conta">
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Chave PIX</label>
                  <input type="text" class="form-input" name="pix" placeholder="CPF, Email, Telefone ou Chave aleat√≥ria">
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="Modal.close('employeeModal')">Cancelar</button>
        <button type="button" class="btn btn-primary" onclick="saveEmployee()">Salvar</button>
      </div>
    </div>
  </div>

  <!-- Modal: Visualizar Funcion√°rio -->
  <div class="modal" id="viewEmployeeModal">
    <div class="modal-dialog modal-lg">
      <div class="modal-header">
        <h3 class="modal-title">Detalhes do Funcion√°rio</h3>
        <button class="modal-close" onclick="Modal.close('viewEmployeeModal')">&times;</button>
      </div>
      <div class="modal-body" id="viewEmployeeContent">
        <!-- Content will be loaded dynamically -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="Modal.close('viewEmployeeModal')">Fechar</button>
        <button type="button" class="btn btn-primary" onclick="editFromView()">Editar</button>
      </div>
    </div>
  </div>

  <script src="public/scripts/auth.js"></script>
  <script src="public/scripts/components.js"></script>
  <script src="public/scripts/employees.js"></script>
</body>
</html>
